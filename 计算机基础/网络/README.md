# 网络基础
## TCP/IP四层模型
* 应用层
* 传输层
* 网络层
* 网络接口层
## 应用层协议
* HTTP协议
* SMTP简单邮件发送协议
* FTP文件传输协议
* SSH安全的网络传输协议
* DNS域名管理系统
## HTTP协议
输入URL到页面展示的过程？
* 通过DNS解析，找到对应的IP
* 根据IP地址和端口号，向目标服务发起TCP连接请求
* TCP连接后，客户端向服务器发送一个HTTP请求报文
* 服务器收到HTTP请求报文后，处理请求，并返回HTTP响应报文给客户端
* 客户端收到响应报文后，解析HTTP报文内容
## HTTP协议状态码
* 1XX：正在处理请求
* 2XX：请求处理完毕
* 3XX：需要附加操作才能完成请求
* 4XX：服务器无法处理请求，请求不存在，客户端传参错误等
* 5XX：服务器内部错误，处理出错
## Ping
作用：常用的网络诊断工具，经常用来测试网络中主机之间的连通性和网络延迟。

工作原理：基于网络层的ICMP协议，主要原理就是通过在网络上发送和接收 ICMP 报文实现的。
## DNS
作用：解决域名和IP的映射问题

DNS服务器层级
* 根DNS服务器
* 顶级域DNS服务器
* 权威DNS服务器
* 本地DNS服务器

DNS劫持：一种网络攻击，它通过修改 DNS 服务器的解析结果，使用户访问的域名指向错误的 IP 地址，从而导致用户无法访问正常的网站，或者被引导到恶意的网站。
## TCP与UDP
区别
* TCP面向连接，UDP不面向连接
* UDP不保证数据可靠交互，TCP提供可靠的服务
* TCP有状态，UDP无状态
* 传输效率：TCP传输时多了连接、确认、重传机制，导致TCP的效率要低不少
* 传输形式：TCP是面向字节流，而UDP是面向报文的

应用场景
* UDP用于即时传输
* TCP用于准确传输
## TCP的三次握手和四次挥手
三次握手
* 一次握手：客户端发送SYN（SEQ=x）标志数据包，发送到服务端，客户端进入SYN_SENT状态
* 二次握手：服务端发送带有SYN+ACK（SEQ=y，ACK=x+1）的数据包到客户端，服务端进入SYN_RECV状态
* 三次握手：客户端发送带有ACK(ACK=y+1)数据包到服务端，客户端和服务端都进入ESTABLISHED状态，完成三次握手

三次握手的目的
* 第一次握手，客户端什么也无法确定，服务端只能确认自己接收正常、对方发送正常。
* 第二次握手，客户端确认了自己发送正常、接收正常，对方发送、接收正常。服务端确认了，对方发送正常、自己接收正常。
* 第三次握手，客户端确认了，自己发送、接收正常，对方发送、接收正常。服务端确认了，自己发送、接收正常，对方发送、接收正常。

为什么握手是三次，而不是两次或者四次？
* 两次不安全：两次服务端不能确定对方的接收是否正常
* 四次没必要

四次挥手
* 第一次挥手：客户端发送一个FIN（SEQ=x）给服务端，然后客户端进入FIN-WAIT-1状态
* 第二次挥手：服务端收到FIN后，发送一个ACK（ACK=x+1）给客户端。服务端进入CLOSE-WAIT状态，客户端进入FIN-WAIT-2状态。
* 第三次挥手：服务端发出一个FIN（SEQ=y）给客户端，服务端进入LAST-ACK状态
* 第四次挥手：客户端发送ACK（ACK=y+1）给服务端，然后客户端进入TIME-WAIT状态，服务端进入CLOSE状态。此时，客户端等待2MSL后依然没有收到回复，就证明服务端正常关闭了。

不能将第二次挥手和第三次挥手结合起来，因为服务端可能还有一些数据没有发完，需要等发完后再发FIN。
## TCP如何保证传输可靠性
* 基于数据块传输
* 对失序的包进行重排和去重
* 校验和
* 重传机制
* 流量控制：滑动窗口
* 拥塞控制