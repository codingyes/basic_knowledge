# RN基础
## 虚拟dom树的diff算法
https://juejin.cn/post/6844904197096226824

### 两个假设
* 两个相同组件会产生相似的DOM结构，两个不同的组件会生成不同的DOM结构
* 对于同一层次的一组子节点，可以通过唯一的id进行区分

### diff算法的实现
三类情况分析：相同类型节点比较、不同类型节点比较、列表节点比较
#### 相同类型节点比较
修改节点A的属性style，react仅会对属性style进行重设
#### 不同节点类型比较
当发现节点已经不存在，则该节点及其子节点会被完全删除掉，不会用于进一步的比较，因此，React 会直接删除前面的节点，然后创建并插入新的节点
#### 列表节点的比较
列表节点时，子元素一般有相同结构，只是内容有些不同。给每个节点添加唯一的key，可以简化diff算法。

列表节点主要涉及添加节点、删除节点、节点排序三种场景：
* 添加节点：如果没有唯一key，只能依次比较状态，需要进行多次dom操作。如果有唯一key，可以直接找到插入位置，对DOM进行1次操作即可
* 删除节点：与添加节点类似
* 排序节点：如果没有唯一key，需要遍历，依次比较。而有唯一key，只需要对相应的节点排序即可